<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap">
  <link rel="stylesheet" href="style.css">
  <!-- highlight CDN css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">

  <title>Sito Documentazione app Discografia</title>
</head>

<body>
  <!-- navbar -->
  <nav class="navbar bg-light navbar-expand-md navbar-light pt-5 pb-4">
    <div class="container-xxl">
      <!-- navbar brand / title -->

      <span class="text-secondary fw-bold">
        <i class="bi bi-boombox"></i>
        Discografia - documentazione
      </span>

      <!-- toggle button for mobile nav -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-nav"
        aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- navbar links -->
      <div class="collapse navbar-collapse justify-content-end align-center" id="main-nav">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Documentazione
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#funzionalita">1. funzionalità e obiettivi</a></li>

              <li><a class="dropdown-item" href="#interfaccia">2. interfaccia utente</a></li>

              <li><a class="dropdown-item" href="#strutture">3. strutture e convenzioni</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="#codice">Codice</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#file">File</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>


  <section id="documentazione">

    <div class="row justify-content-center align-items-center m-4">
      <div class="col-md-8 text-md-start">

        <div class="display-4 my-3">
          Documentazione
        </div>

        <section id="funzionalita">

          <div class="display-5 text-muted mt-5">Definizione di funzionalità e obiettivi</div>

          <p class="lead my-4">
          <ul>
            <li class="my-2"> il programma deve prendere in inserimento dei dischi e li va a catalogare</li>
            <li class="my-2"> al lancio del programma verrà creata una cartella Catalogo</li>
            <li class="my-2"> per ogni artista di cui viene inserito un disco, verrà creata una cartella all'interno
              della cartella Catalogo:</li>
            <ul>
              <li class="my-2"> ogni cartella di un artista conterrà un file json per ogni suo album registrato nel
                catalogo</li>
              <li class="my-2"> ogni file json conterrà il nome dell'album, l'anno di pubblicazione e le copie
                disponibili in negozio</li>
            </ul>
            <li class="my-2">se viene inserito un album di un artista di cui non è ancora presente una cartella
              all'interno del Catalogo, verrà creata;</li>
            <li class="my-2">se viene inserito un album già presente in catalogo, verrà aggiornata la quantità di copie
              disponibili</li>
            <li class="my-2">possibilità di rimuovere album dal catalogo (in caso vengano venduti)</li>
            <li class="my-2">possibilità di stampare elenco album di un determinato artista presenti in catalogo</li>
          </ul>
          </p>
        </section>

      </div>
    </div>





    <div class="row justify-content-center align-items-center m-4">
      <div class="col-md-8 text-md-start">

        <section id="interfaccia">
          <div class="display-5 text-muted mt-5">Interfaccia utente</div>

          <p class="lead my-4">
          <ul>
            <li class="my-2"> l'utente opererà sul catalogo dischi attraverso un menu che permette di aggiungere,
              eliminare o cercare dischi</li>
            <li class="my-2"> richiesta all'utente di inserire il nome dell'artista di cui si vuole inserire un disco in
              catalogo</li>
            <li class="my-2"> richiesta di inserire il titolo dell'album e l'anno di pubblicazione</li>

            <li class="my-2">possibilità di continuare ad inserire album dello stesso artista</li>
            <li class="my-2">richiesta di passare al catalogo di un altro artista di cui inserire album, o chiudere il
              programma</li>
            <li class="my-2">in caso di ricerca verra mostrato l'elenco degli album con anno di pubblicazione, e a
              destra la disponibilità</li>

          </ul>
          </p>
        </section>


      </div>
    </div>


    <div class="row justify-content-center align-items-center m-4">
      <div class="col-md-8 text-md-start">

        <section id="strutture">
          <div class="display-5 text-muted mt-5">Definizione di Strutture e Convenzioni</div>

          <p class="lead my-4">
          <ul>
            <li class="my-2">verranno creati più documenti:</li>
            <ul>
              <li class="my-2">una cartella Catalogo</li>
              <li class="my-2">una cartella per ogni artista, dentro Catalogo</li>
              <li class="my-2">un file json per ogni album, dentro cartella artista</li>
            </ul>
            <li class="my-2">definizione di un menu con 4 scelte (aggiungi, cerca, elimina, chiudi)</li>
            <li class="my-2">implementare 2 cicli while: uno per continuare l'inserimento di album, uno per
              l'inserimento di nuovi artisti</li>
            <li class="my-2">implementare 2 cicli while: uno per continuare l'inserimento di album, uno per
              l'inserimento di nuovi artisti</li>
            <ul>
              <li class="my-2">controllo sulle cartelle artisti per sapere se crearla o aggiornarla quando si inserisce
                un artista</li>
              <li class="my-2">controllo sui file json per sapere se crearlo o aggiornarlo quando si inserisce un album
              </li>
            </ul>
            <li class="my-2">controllo legalità sui campi da inserire in input</li>
          </ul>
          </p>
        </section>

      </div>
    </div>

  </section>


  <p><br><br><br><br></p>



  <section id="codice">

    <div class="row justify-content-center align-items-center m-4">
      <div class="col-md-8 text-md-start">

        <div class="display-4 my-3">
          Codice
        </div>
      </div>
    </div>

    <div class="container-md">

      <div class="row my-5 g-5 justify-content-around align-items-center">

        <div class="col-lg-10">


          <div class="accordion">
            <div class="accordion-item">
              <h2 class="accordion-header" id="heading-1">
                <button class="accordion-button center" type="button" data-bs-toggle="collapse"
                  data-bs-target="#chapter-1" aria-expanded="true" aria-controls="chapter-1">
                  Codice C#
                </button>
              </h2>
              <div id="chapter-1" class="accordion-collapse collapse show" aria-labelledby="heading-1"
                data-bs-parent="#chapters">
                <div class="accordion-body">
                  <pre>
                  <code>using Newtonsoft.Json;

class Program
{
    static void Main(string[] args)
    {

        string catalogo = $"./Catalogo";
        if (!Directory.Exists(catalogo))
        {
            Directory.CreateDirectory("./Catalogo");
        }

        Console.CursorVisible = false;
        bool continua = true;
        do
        {

            Console.Clear();

            Console.WriteLine("** MENU **\n");
            Console.WriteLine("1. Aggiungi dischi al catalogo\n");
            Console.WriteLine("2. Cerca dischi per artista\n");
            Console.WriteLine("3. Rimuovi dischi dal catalogo\n");
            Console.WriteLine("e. Chiudi applicazione\n");

            string? scelta = Console.ReadLine();

            switch (scelta)
            {

                case "1":
                    {
                        Console.Clear();

                        bool risp2 = true;
                        while (risp2)
                        {


                            Console.WriteLine("Inserisci nome artista:");
                            string artist = Console.ReadLine()!;
                            string nomeCartella = artist.Trim();
                            nomeCartella = nomeCartella.Replace(" ", "-");

                            string file = $"./Catalogo/{nomeCartella}";
                            if (!File.Exists(file))
                            {
                                Directory.CreateDirectory("./Catalogo/" + nomeCartella);
                            }

                            bool risp = true;
                            while (risp)
                            {

                                Console.Clear();
                                Console.Write("Inserisci titolo album: ");
                                string titolo = Console.ReadLine()!;


                                string nomeFile = titolo.Trim();
                                nomeFile = nomeFile.Replace(" ", "-");

                                string path = $"./Catalogo./{nomeCartella}/" + nomeFile + ".json";
                                int quantita;

                                if (File.Exists(path))
                                {

                                    // Leggere il file JSON esistente
                                    var jsonData = File.ReadAllText(path);

                                    // Deserializzare il contenuto JSON in un oggetto dynamic
                                    dynamic data = JsonConvert.DeserializeObject<dynamic>(jsonData)!;

                                    // Modificare il valore desiderato
                                    int qnt = data.quantita;
                                    qnt++;
                                    data.quantita = qnt;

                                    // Serializzare l'oggetto dynamic modificato in una stringa JSON
                                    var updatedJsonData = JsonConvert.SerializeObject(data);

                                    // Sovrascrivere il file JSON con la nuova stringa JSON
                                    File.WriteAllText(path, "\n\t" + updatedJsonData);

                                    Console.WriteLine("Disco già presente in catalogo. Quantità aggiornata.\n");

                                }
                                else
                                {
                                    Console.Write("Inserisci anno di pubblicazione: ");
                                    string anno = Console.ReadLine()!;
                                    quantita = 1;

                                    File.AppendAllText(path, "\n\t" + JsonConvert.SerializeObject(new { titolo, anno, quantita }));
                                }



                                Console.Write("\nVuoi inserire un altro album? (s/n):  ");
                                string risposta = Console.ReadLine()!;

                                while (risposta != "n" && risposta != "s")
                                {
                                    Console.Write("\nInserimento non valido.\nVuoi inserire un altro album? (s/n):  ");
                                    risposta = Console.ReadLine()!;
                                }

                                if (risposta == "n")
                                {

                                    risp = false;
                                }

                            }




                            Console.Write("\nVuoi inserire un altro artista? (s/n):  ");
                            string risposta2 = Console.ReadLine()!;
                            while (risposta2 != "n" && risposta2 != "s")
                            {
                                Console.Write("\nInserimento non valido.\nVuoi inserire un altro artista? (s/n):  ");
                                risposta2 = Console.ReadLine()!;
                            }

                            if (risposta2 == "n")
                            {

                                risp2 = false;
                            }


                        }
                        break;
                    }

                case "2":
                    {
                        Console.Clear();
                        Console.Write("Inserisci artista di cui cercare i dischi: ");
                        string artist = Console.ReadLine()!;
                        string nomeCartella = artist.Trim();
                        nomeCartella = artist.Replace(" ", "-");

                        string file = $"./Catalogo/{nomeCartella}";


                        if (Directory.Exists(file))
                        {
                            Console.Clear();
                            Console.WriteLine($"CATALOGO {artist}\n");


                            string via = ($"./Catalogo./{nomeCartella}");
                            string[] files = Directory.GetFiles(via);


                            foreach (string album in files)
                            {
                                string jsonFile = File.ReadAllText(album);
                                dynamic obj = JsonConvert.DeserializeObject(jsonFile)!;

                                string datiAlbum = $"{obj.titolo} ({obj.anno})";
                                string disponibili = $"disponibilità:{obj.quantita}";

                                StampaTabellaAlbum(datiAlbum, disponibili);


                            }

                        }
                        else
                        {
                            Console.WriteLine("CATALOGO INESISTENTE");
                        }


                        Console.WriteLine("\n\npremi un tasto per proseguire...");
                        Console.ReadKey();
                        break;

                    }

                case "3":
                    {
                        Console.Clear();

                        Console.Write("Artista di cui rimuovere il disco: ");

                        string artist = Console.ReadLine()!;
                        string nomeCartella = artist.Trim();
                        nomeCartella = nomeCartella.Replace(" ", "-");

                        string file = $"./Catalogo/{nomeCartella}";
                        if (Directory.Exists(file))
                        {

                            Console.Write("Inserisci titolo album da rimuovere: ");
                            string titolo = Console.ReadLine()!;

                            string nomeFile = titolo.Trim();
                            nomeFile = nomeFile.Replace(" ", "-");

                            string path = $"./Catalogo./{nomeCartella}/" + nomeFile + ".json";

                            if (File.Exists(path))
                            {

                                // Leggere il file JSON esistente
                                var jsonData = File.ReadAllText(path);

                                // Deserializzare il contenuto JSON in un oggetto dynamic
                                dynamic data = JsonConvert.DeserializeObject<dynamic>(jsonData)!;

                                // Modificare il valore desiderato
                                int qnt = data.quantita;

                                if (qnt == 1)
                                {
                                    File.Delete(path);
                                }
                                else
                                {

                                    qnt--;
                                    data.quantita = qnt;

                                    // Serializzare l'oggetto dynamic modificato in una stringa JSON
                                    var updatedJsonData = JsonConvert.SerializeObject(data);

                                    // Sovrascrivere il file JSON con la nuova stringa JSON
                                    File.WriteAllText(path, "\n\t" + updatedJsonData);

                                    Console.WriteLine("1 copia del disco eliminata. Quantità aggiornata.\n");
                                    Thread.Sleep(2000);

                                }


                            }
                            else
                            {
                                Console.WriteLine("Questo album non è presente in catalogo\n");
                            }




                        }
                        else
                        {
                            Console.WriteLine("Nessun album di questo artista in catalogo\n");
                        }




                        Console.WriteLine("\n\npremi un tasto per proseguire...");
                        Console.ReadKey();
                        break;
                    }

                case "e":
                    {
                        Console.Clear();
                        Console.WriteLine("Uscita in corso...");
                        Thread.Sleep(1500);
                        Console.Clear();
                        continua = false;
                        break;
                    }

                default:
                    {
                        Console.WriteLine("Selezione non valida.");
                        break;
                    }
            }
        }
        while (continua);
        Console.CursorVisible = true;
    }


    /// <summary>
    ///  serve a stampare in modo ordinato i nomi degli album e la loro disponibilità
    /// </summary>
    /// <param name="datiAlbum">Titolo e anno di pubblicazione dell'album</param>
    /// <param name="disponibili">Copie disponibili in negozio</param>
    static void StampaTabellaAlbum(string datiAlbum, string disponibili)
    {

        int maxCaratteri = 75;
        string spazi = "";
        for (int i = 0; i < maxCaratteri - datiAlbum.Length; i++)
        {
            spazi += " ";
        }

        Console.WriteLine(datiAlbum + spazi + disponibili);
    }

}


                              
                  </code>
                  </pre>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>

  </section>

  <p><br><br><br><br></p>


  <section id="file">

    <div class="row justify-content-center align-items-center m-4">
      <div class="col-md-8 text-md-start">

        <div class="display-4 my-3">
          File JSON
        </div>

        <p>* sia le cartelle che i file json vengono creati dal programma *<br>
          <br>
          La cartella CATALOGO conterrà altre cartelle con i nomi degli artisti di cui sono stati memorizzati
          album<br><br>
          esempio &emsp;./Catalogo./Led Zeppelin<br>
          &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;./Catalogo./Bob Dylan<br><br>
          La cartella ARTISTA conterrà un file json per ogni album memorizzato<br><br>
          esempio &emsp;./Catalogo./Led Zeppelin./Led Zeppelin I.json<br>
          &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;./Catalogo./Led Zeppelin./Led Zeppelin II.json<br>
          &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;./Catalogo./Led Zeppelin./Led Zeppelin III.json<br>
          <br><br><br>

        </p>


        <div class="text-center d-none d-md-block">

          <img src="code.png" class="img-fluid rounded-3" alt="ebook" />

        </div>

      </div>
    </div>
  </section>


  <p><br><br><br><br></p>
  <p><br><br><br><br></p>


  <!-- higlight CDN js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"
    integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous">
    </script>

</body>

</html>